FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package.json ./
RUN npm install --production

# Copy application code
COPY payrollProcessor.js ./

# Set up iExec environment
ENV IEXEC_IN=/iexec_in
ENV IEXEC_OUT=/iexec_out

# Create directories
RUN mkdir -p /iexec_in /iexec_out

# Set entrypoint
ENTRYPOINT ["node", "payrollProcessor.js"]